#!/bin/bash

JOBS="INTER-HOST HOST-NETWORK-INTRA HOST-NETWORK INTRA-NODE INTER-NODE INGRESS EGRESS"


function batch_summary {
  for job in $JOBS;do
    echo TOPO: $job
    pushd $job
    #LABEL=$(cat thislabel)
    LABEL=$1
    FILES=$(ls *$LABEL*.log)
    #echo $FILES
    for file in $FILES; do
       echo "$(realpath $file):----"
       cat $file | grep 'run-id\|tags:\|common\|unique\|result:'
    done
    popd
  done
}

sum=0
run=0
longopts="sum,run"
opts=$(getopt -q -o "" --longoptions "$longopts" -n "getopt.sh" -- "$@");
if [ $? -ne 0 ]; then
    echo "Unrecognized option specified"
    exit
fi
eval set -- "$opts";
echo "opts after: $@"
while true; do
    case "$1" in
        --sum)
            shift;
            sum=1
            ;;
        --run)
            shift;
            run=1
            ;;
        --)
            shift;
            break
            ;;
        *)
            echo "Invalid option: $1"
            exit
    esac
done

TAG="tues"
echo batch_summary $TAG
batch_summary $TAG

